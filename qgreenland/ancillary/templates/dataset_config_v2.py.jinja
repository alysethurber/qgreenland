{%- set asset_class = asset_type_map[dataset.access_method] -%}
from qgreenland.models.config.asset import {{ asset_class }}
from qgreenland.models.config.dataset import ConfigDataset


{{ dataset.id }} = ConfigDataset(
    id='{{ dataset.id }}',
    assets=[
        {%- for source in dataset.sources %}
        {{ asset_class }}(
            id='{{ source.id }}',
            {%- if dataset.access_method == 'manual' %}
            access_instructions=(
                {{'"""%s"""'|format(source.access_instructions)|wordwrap(width=80-16, break_on_hyphens=False)|indent(16)}}
            ),
            {%- elif dataset.access_method == 'http' %}
            urls=[
              {%- for url in source.urls %}
                '{{ url }}',
              {%- endfor %}
            ],
            {%- endif %}
        ),
        {%- endfor %}
    ],
    metadata={
        'title': '{{dataset.metadata.title}}',
        'abstract': (
            {{'"""%s"""'|format(dataset.metadata.abstract)|wordwrap(width=80-12, break_on_hyphens=False)|indent(12)}}
        ),
        'citation': {
            'text': (
                {{'"""%s"""'|format(dataset.metadata.citation.text)|wordwrap(width=80-16, break_on_hyphens=False)|indent(16)}}
            ),
            'url': '{{dataset.metadata.citation.url}}',
        },
    },
)
